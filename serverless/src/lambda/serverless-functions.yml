jwtAuthorizer:
  handler: src/auth/authorizer.handler

basicQueueDispatcher:
  handler: src/lambda/queues/basicQueue-dispatcher.handler
  timeout: 30
  events:
    - http:
        path: /api/invoke
        method: post
        cors: true
        authorizer: jwtAuthorizer

basicQueueHandler:
  handler: src/lambda/queues/basicQueue-handler.promise
  events:
    - sqs:
        arn:
          Fn::GetAtt:
            - basicQueue
            - Arn

login:
  handler: src/lambda/auth/login.main
  events:
    - http:
        path: /api/login
        method: post
        cors: true


armpit:
  handler: src/lambda/armpit/armpit.armpit
  events:
    - http:
        path: /api/armpit
        method: get
        cors: true
        authorizer: jwtAuthorizer


armpitCount:
  handler: src/lambda/armpit/armpit-count.armpitCount
  events:
    - http:
        path: /api/armpit/{count}
        method: get
        cors: true
        authorizer: jwtAuthorizer
